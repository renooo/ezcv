<md-content>
	<md-toolbar>
		<div class="md-toolbar-tools" layout="row" layout-align="space-between center">
			<md-button ng-click="editCV()" aria-label="retour">
				<md-icon icon="images/ic_arrow_back_24px.svg" style="width: 24px; height: 24px;"></md-icon>
			</md-button>
			<h1 class="toolbar-title">
	        	Modifier une expérience
	      	</h1>
	      	<div></div>
		</div>
	</md-toolbar>
	<md-content class="md-padding" ng-hide="loading">
		<form name="experienceForm" layout="column">
			<md-input-container>
	        	<label>Poste occupé</label>
	      	</md-input-container>
	      	<div>
	      		<select style="width: 100%;" name="job" ng-model="experience._embedded.job" ng-options="job.name for job in jobs track by job.id" ng-disabled="updating">
	        	</select>
	      	</div>
			<md-input-container>
	        	<label>Dans l'entreprise</label>
	      	</md-input-container>
	      	<div>
	      		<select style="width: 100%;" name="company" ng-model="experience._embedded.company" ng-options="company.name for company in companies track by company.id" ng-disabled="updating">
	        	</select>
	      	</div>
	      	<div layout="row" layout-align="center center">
				<md-input-container class="date">
		        	<label>Date de début</label>
		        	<input name="dateStart" ng-model="experience.dateStart" ng-disabled="updating" type="date" min="1900-01-01">
		      	</md-input-container>
				<md-input-container class="date">
		        	<label>Date de fin</label>
		        	<input name="dateEnd" ng-model="experience.dateEnd" ng-disabled="updating" type="date" min="1900-01-01">
		        	<div ng-messages="errors.dateEnd">
						<div ng-repeat="(code, message) in errors.dateEnd" ng-message="code">{{message}}</div>
					</div>
		      	</md-input-container>
		    </div>		 
		</form>
		<md-subheader class="md-primary">
			Missions
		</md-subheader>
		<md-divider></md-divider>
		<md-list>
			<md-item ng-repeat="mission in experience._embedded.missions">
				<md-item-content ng-class-even="'mission-item'">
					<form class="md-tile-content">
						<h4>Mission n°{{$index+1}}</h4>
						<md-input-container>
				        	<label>Intitulé</label>
				        	<input name="name" ng-model="mission.name">
			      		</md-input-container>
						 <md-input-container>
							<label>Description</label>
							<textarea ng-model="mission.description" columns="1" rows="3" md-maxlength="500"></textarea>
						</md-input-container>
						<h4>
							Mots-clés
							<md-button class="md-primary" ng-click="addTags(mission)">Ajouter</md-button>
						</h4>
						<div>
							<md-button class="md-raised" style="margin-right: 10px; margin-bottom: 10px;" ng-repeat="tag in mission._embedded.tags" ng-click="removeTag(mission, tag)">
								<md-icon class="inline-list-icon" icon="images/ic_label_outline_24px.svg" style="width: 18px; height: 18px;"></md-icon>
								<span class="inline-list-icon-label">{{tag.label}}</span>
							</md-button>
						</div>
						<br />
						<div layout="row" layout-align="end center">
							<md-button class="md-primary" ng-click="deleteMission(mission)">Supprimer</md-button>
						</div>				
					</form>
				</md-item-content>
				<md-divider></md-divider>
			</md-item>
		</md-list>
		<md-button ng-click="newMission()" ng-disabled="creating" class="md-fab md-primary md-hue-1 bottom-right-corner" aria-label="nouvelle mission">
            <md-icon icon="images/ic_playlist_add_24px.svg" style="width: 24px; height: 24px;"></md-icon>
        </md-button>
	</md-content>
</md-content>
